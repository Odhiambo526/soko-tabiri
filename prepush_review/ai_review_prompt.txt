AI REVIEW PROMPT
----------------
Context:
You have the staged-diff (prepush.diff) and the relevant docs in this bundle (README.md, SECURITY.md, THREAT_MODEL.md, OPERATIONAL_RUNBOOK.md, migrations/, openapi/). Your job is to detect and fix:
  - AI-slops / hallucinations: any factual assertions, external claims, or "design facts" that are not supported by in-repo evidence must be flagged. For each such claim either:
      A) annotate it with a clear "// ASSUMPTION: <rationale>" comment or
      B) replace it with neutral wording (or remove it) if it is unverifiable.
    Default action: annotate (A) unless safe, deterministic code/doc change can be applied.
  - Biased language: detect phrasing that is biased, judgmental, or exclusionary. Replace with neutral language and provide a summary of replacements.
  - Unsupported API endpoints: ensure OpenAPI files correspond to implemented endpoints in the staged diff. If mismatch, produce patches to either the OpenAPI doc or to add stub handler that returns 501 + TODO.
  - Missing tests: verify that core AMM math module has unit tests covering invariants and that a smoke integration test exists for trade→settlement against a mocked lightwalletd.
  - Secrets: confirm no secrets remain. If any possible secrets are found, list them (file + line context) and produce a patch to remove them or replace with env placeholders.

Output requirements (strict):
1) Produce a concise executive summary of findings (max 10 lines).
2) Produce unified-diff patch(es) that directly modify files to fix issues (add annotations, neutralize biased phrasing, fix OpenAPI mismatches, add missing small test stubs). The output must be valid unified-diff format and **only** contain changes to files included in the bundle.
3) For every changed file, include an inline justification comment (one-liner) at top of the patch hunk explaining why the change was made.
4) For each detected hallucination or unsupported factual claim that you cannot safely auto-fix, produce a small block in the summary titled "Unresolved hallucinations" listing file:line:quote and a recommended ASSUMPTION text to insert.
5) All added statements asserting external facts must be either:
     - annotated with "// ASSUMPTION: <explanation>" OR
     - replaced by "EXAMPLE SOURCE — verify before use" placeholder.
6) Replace biased words with alternatives and list them in the summary "Bias corrections".
7) Do not invent external sources. If you recommend a source, mark it as "EXAMPLE SOURCE — verify before use" and do not include any URLs.
8) Do not add real private keys or credentials.
9) Keep patches minimal and focused. Avoid wholesale rewrites.
10) If a requested code change is non-trivial (more than ~40 LOC), instead create a small stub + TODO with an ASSUMPTION marker and an explicit developer action item.

Behavioral rules for the assistant:
- Be conservative: prefer annotation to deletion when in doubt.
- Be explicit about assumptions: any added factual statement must include an ASSUMPTION comment.
- Neutralize language: convert evaluative or sensational phrasing to technical, neutral phrasing.
- For API mismatches: if an endpoint is documented but no handler exists, add a stub handler returning 501 and a TODO referencing the OpenAPI operationId.

Files you will find in the bundle:
- prepush.diff
- README.md
- SECURITY.md
- THREAT_MODEL.md
- OPERATIONAL_RUNBOOK.md
- migrations/001_init.sql (if present)
- services/settlement/openapi.yaml (if present)
- services/oracle/openapi.yaml (if present)
- any other staged files included in diff

Deliver patches only. Begin by listing a one-paragraph summary, then output unified-diff(s).

